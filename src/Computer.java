import java.util.Objects;
import java.util.Random;

public class Computer {
    Random random = new Random();

    public String finalDecision(char[][] selected) {
        if (!Objects.equals(winCheck(selected), "null")) {
            return winCheck(selected);
        } else if (!Objects.equals(riskCheck(selected), "null")) {
            return riskCheck(selected);
        }
        return bestSelection(selected);
    }

    String winCheck(char[][] a) {
        if ((a[0][0] == 'o' || a[0][1] == 'o') && a[0][0] == a[0][1] && (a[0][2] != 'o' && a[0][2] != 'x'))
            return "r02r";
        else if ((a[0][0] == 'o' || a[0][2] == 'o') && a[0][0] == a[0][2] && (a[0][1] != 'o' && a[0][1] != 'x'))
            return "r01r";
        else if ((a[0][1] == 'o' || a[0][2] == 'o') && a[0][2] == a[0][1] && (a[0][0] != 'o' && a[0][0] != 'x'))
            return "r0r";
        //--------------------------------------------------------------------

        //---------------------------Column 1-----------------------------------
        if ((a[0][0] == 'o' || a[1][0] == 'o') && a[0][0] == a[1][0] && (a[2][0] != 'o' && a[2][0] != 'x'))
            return "c20c";
        else if ((a[0][0] == 'o' || a[2][0] == 'o') && a[0][0] == a[2][0] && (a[1][0] != 'o' && a[1][0] != 'x'))
            return "c10c";
        else if ((a[2][0] == 'o' || a[1][0] == 'o') && a[2][0] == a[1][0] && (a[0][0] != 'o' && a[0][0] != 'x'))
            return "c00c";
        //----------------------------Column 2-----------------------------------
        if ((a[0][1] == 'o' || a[1][1] == 'o') && a[0][1] == a[1][1] && (a[2][1] != 'o' && a[2][1] != 'x'))
            return "c21c";
        else if ((a[0][1] == 'o' || a[2][1] == 'o') && a[0][1] == a[2][1] && (a[1][1] != 'o' && a[1][1] != 'x'))
            return "c11c";
        else if ((a[2][1] == 'o' || a[1][0] == 'o') && a[2][1] == a[1][0] && (a[0][1] != 'o' && a[0][1] != 'x'))
            return "c01c";
        //----------------------------Column 3-----------------------------------
        if ((a[0][2] == 'o' || a[1][2] == 'o') && a[0][2] == a[1][2] && (a[2][2] != 'o' && a[2][2] != 'x'))
            return "c22c";
        else if ((a[0][2] == 'o' || a[2][2] == 'o') && a[0][2] == a[2][2] && (a[1][2] != 'o' && a[1][2] != 'x'))
            return "c12c";
        else if ((a[2][2] == 'o' || a[1][2] == 'o') && a[2][2] == a[1][2] && (a[0][2] != 'o' && a[0][2] != 'x'))
            return "c02c";
        //----------------------------Diagonal 1-----------------------------------
        if ((a[0][0] == 'o' || a[1][1] == 'o') && a[0][0] == a[1][1] && a[2][2] != 'x') return "d22d";
        else if ((a[0][0] == 'o' || a[2][2] == 'o') && a[0][0] == a[2][2] && a[1][1] != 'x')
            return "d11d";
        else if ((a[2][2] == 'o' || a[1][1] == 'o') && a[2][2] == a[1][1] && a[0][0] != 'x')
            return "d00d";
        //----------------------------Diagonal 2-----------------------------------
        if ((a[0][2] == 'o' || a[1][1] == 'o') && a[0][2] == a[1][1] && a[2][0] != 'x') return "d20d";
        else if ((a[0][2] == 'o' || a[2][0] == 'o') && a[0][2] == a[2][0] && a[1][1] != 'x')
            return "d11d";
        else if ((a[2][0] == 'o' || a[1][1] == 'o') && a[2][0] == a[1][1] && a[0][2] != 'x')
            return "d02d";


        //----------------------------Row 2-----------------------------------
        if ((a[1][0] == 'o' || a[1][1] == 'o') && a[1][0] == a[1][1] && (a[1][2] != 'o' && a[1][2] != 'x'))
            return "r12r";
        else if ((a[1][0] == 'o' || a[1][2] == 'o') && a[1][0] == a[1][2] && (a[1][1] != 'o' && a[1][1] != 'x'))
            return "r11r";
        else if ((a[1][2] == 'o' || a[1][1] == 'o') && a[1][2] == a[1][1] && (a[1][0] != 'o' && a[1][0] != 'x'))
            return "r10r";
        //--------------------------------------------------------------------

        //----------------------------Row 3-----------------------------------
        if ((a[2][0] == 'o' || a[2][1] == 'o') && a[2][0] == a[2][1] && (a[2][2] != 'o' && a[2][2] != 'x'))
            return "r22r";
        else if ((a[2][0] == 'o' || a[2][2] == 'o') && a[2][0] == a[2][2] && (a[2][1] != 'o' && a[2][1] != 'x'))
            return "r21r";
        else if ((a[2][2] == 'o' || a[2][1] == 'o') && a[2][2] == a[2][1] && (a[2][0] != 'o' && a[2][0] != 'x'))
            return "r20r";
        //--------------------------------------------------------------------


        return "null";
    }


    String riskCheck(char[][] a) {
        //----------------------------Row 1-----------------------------------
        if ((a[0][0] == 'x' || a[0][1] == 'x') && a[0][0] == a[0][1] && (a[0][2] != 'o' && a[0][2] != 'x'))
            return "r02";
        else if ((a[0][0] == 'x' || a[0][2] == 'x') && a[0][0] == a[0][2] && (a[0][1] != 'o' && a[0][1] != 'x'))
            return "r01";
        else if ((a[0][1] == 'x' || a[0][2] == 'x') && a[0][2] == a[0][1] && (a[0][0] != 'o' && a[0][0] != 'x'))
            return "r00";
        //--------------------------------------------------------------------

        //---------------------------Column 1-----------------------------------
        if ((a[0][0] == 'x' || a[1][0] == 'x') && a[0][0] == a[1][0] && (a[2][0] != 'o' && a[2][0] != 'x'))
            return "c20";
        else if ((a[0][0] == 'x' || a[2][0] == 'x') && a[0][0] == a[2][0] && (a[1][0] != 'o' && a[1][0] != 'x'))
            return "c10";
        else if ((a[2][0] == 'x' || a[1][0] == 'x') && a[2][0] == a[1][0] && (a[0][0] != 'o' && a[0][0] != 'x'))
            return "c00";
        //----------------------------Column 2-----------------------------------
        if ((a[0][1] == 'x' || a[1][1] == 'x') && a[0][1] == a[1][1] && (a[2][1] != 'o' && a[2][1] != 'x'))
            return "c21";
        else if ((a[0][1] == 'x' || a[2][1] == 'x') && a[0][1] == a[2][1] && (a[1][1] != 'o' && a[1][1] != 'x'))
            return "c11";
        else if ((a[2][1] == 'x' || a[1][1] == 'x') && a[2][1] == a[1][1] && (a[0][1] != 'o' && a[0][1] != 'x'))
            return "c01";
        //----------------------------Column 3-----------------------------------
        if ((a[0][2] == 'x' || a[1][2] == 'x') && a[0][2] == a[1][2] && (a[2][2] != 'o' && a[2][2] != 'x'))
            return "c22";
        else if ((a[0][2] == 'x' || a[2][2] == 'x') && a[0][2] == a[2][2] && (a[1][2] != 'o' && a[1][2] != 'x'))
            return "c12";
        else if ((a[2][2] == 'x' || a[1][2] == 'x') && a[2][2] == a[1][2] && (a[0][2] != 'o' && a[0][2] != 'x'))
            return "c02";

        //----------------------------Diagonal 1-----------------------------------
        if ((a[0][0] == 'x' || a[1][1] == 'x') && a[0][0] == a[1][1] && a[2][2] != 'o') return "d22";
        else if ((a[0][0] == 'x' || a[2][2] == 'x') && a[0][0] == a[2][2] && a[1][1] != 'o') return "d11";
        else if ((a[2][2] == 'x' || a[1][1] == 'x') && a[2][2] == a[1][1] && a[0][0] != 'o') return "d00";
        //----------------------------Diagonal 2-----------------------------------
        if ((a[0][2] == 'x' || a[1][1] == 'x') && a[0][2] == a[1][1] && a[2][0] != 'o') return "d20";
        else if ((a[0][2] == 'x' || a[2][0] == 'x') && a[0][2] == a[2][0] && a[1][1] != 'o') return "d11";
        else if ((a[2][0] == 'x' || a[1][1] == 'x') && a[2][0] == a[1][1] && a[0][2] != 'o') return "d02";

        //----------------------------Row 2-----------------------------------
        if ((a[1][0] == 'x' || a[1][1] == 'x') && a[1][0] == a[1][1] && (a[1][2] != 'o' && a[1][2] != 'x'))
            return "r12";
        else if ((a[1][0] == 'x' || a[1][2] == 'x') && a[1][0] == a[1][2] && (a[1][1] != 'o' && a[1][1] != 'x'))
            return "r11";
        else if ((a[1][2] == 'x' || a[1][1] == 'x') && a[1][2] == a[1][1] && (a[1][0] != 'o' && a[1][0] != 'x'))
            return "r10";
        //--------------------------------------------------------------------

        //----------------------------Row 3-----------------------------------
        if ((a[2][0] == 'x' || a[2][1] == 'x') && a[2][0] == a[2][1] && (a[2][2] != 'o' && a[2][2] != 'x'))
            return "r22";
        else if ((a[2][0] == 'x' || a[2][2] == 'x') && a[2][0] == a[2][2] && (a[2][1] != 'o' && a[2][1] != 'x'))
            return "r21";
        else if ((a[2][2] == 'x' || a[2][1] == 'x') && a[2][2] == a[2][1] && (a[2][0] != 'o' && a[2][0] != 'x'))
            return "r20";
        //--------------------------------------------------------------------
        return "null";
    }

    String bestSelection(char[][] b) {
        if (!Objects.equals(lowWinCheck(b), "null")) return lowWinCheck(b);
        if (!Objects.equals(lowRisk(b), "null")) return lowRisk(b);

        return "null";
    }

    String lowRisk(char[][] b) {
        if (b[1][1] == 'x' && (b[0][0] == '\u0000' && b[0][2] == '\u0000' && b[2][0] == '\u0000' && b[2][2] == '\u0000')) {
            switch (random.nextInt(0, 4)) {
                case 0 -> {
                    return "r00lowRisk";
                }
                case 1 -> {
                    return "r02lowRisk";
                }
                case 2 -> {
                    return "r20lowRisk";
                }
                case 3 -> {
                    return "r22lowRisk";
                }
            }
        } else if (b[0][0] == 'x' || b[0][2] == 'x' || b[2][0] == 'x' || b[2][2] == 'x' || b[0][1] == 'x' || b[1][0] == 'x' || b[1][2] == 'x' || b[2][1] == 'x') {
            if (b[1][1] == '\u0000') return "r11lowRisk";
            else if (b[0][0] == 'x' && b[1][2] == 'x' && b[2][2] == '\u0000') return "r02lowRisk1";
            else if (b[0][0] == 'x' && b[2][1] == 'x' && b[2][2] == '\u0000') return "r20lowRisk2";
            else if (b[0][2] == 'x' && b[1][0] == 'x' && b[0][0] == '\u0000') return "r00lowRisk3";
            else if (b[0][2] == 'x' && b[2][1] == 'x' && b[2][0] == '\u0000') return "r22lowRisk4";
            else if (b[2][2] == 'x' && b[0][1] == 'x' && b[0][0] == '\u0000') return "r02lowRisk5";
            else if (b[2][2] == 'x' && b[1][0] == 'x' && b[0][0] == '\u0000') return "r20lowRisk6";
            else if (b[2][0] == 'x' && b[0][1] == 'x' && b[0][2] == '\u0000') return "r00lowRisk7";
            else if (b[2][0] == 'x' && b[1][2] == 'x' && b[0][0] == '\u0000') return "r22lowRisk8";

            else if (b[1][0] == 'x' && b[0][1] == 'x' && b[0][0] == '\u0000') return "r00lowRisk9";
            else if (b[1][2] == 'x' && b[0][1] == 'x' && b[0][2] == '\u0000') return "r02lowRisk10";
            else if (b[2][1] == 'x' && b[0][1] == 'x' && b[0][0] == '\u0000') return "r00lowRisk11";
            else if (b[2][1] == 'x' && b[1][0] == 'x' && b[2][0] == '\u0000') return "r20lowRisk12";
            else if (b[1][2] == 'x' && b[1][0] == 'x' && b[2][2] == '\u0000') return "r22lowRisk13";
            else if (b[2][1] == 'x' && b[1][2] == 'x' && b[2][2] == '\u0000') return "r22lowRisk14";

            if (b[1][1] == 'o' && b[0][2] == '\u0000' && b[2][1] == '\u0000') return "r02lowRisk15";
            else if (b[1][1] == 'o' && b[0][0] == '\u0000' && b[2][2] == '\u0000') return "r00lowRisk15";

        }
        return "null";
    }

    String lowWinCheck(char[][] b) {
        if (b[1][1] == 'o' && b[0][1] == '\u0000' && b[1][2] == '\u0000' && b[2][1] == '\u0000' && b[1][0] == '\u0000') {
            switch (random.nextInt(0, 4)) {
                case 1 -> {
                    return "r01lowWin1";
                }
                case 2 -> {
                    return "r12lowWin2";
                }
                case 3 -> {
                    return "r21lowWin3";
                }
                case 4 -> {
                    return "r10lowWin1";
                }
            }
        }
        return "null";
    }
}
